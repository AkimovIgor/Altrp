(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{372:function(t,e,n){"use strict";n.r(e);var r=n(12),a=n.n(r),s=n(4),c=n.n(s),o=n(5),i=n.n(o),l=n(2),u=n.n(l),f=n(6),h=n.n(f),m=n(7),p=n.n(m),v=n(3),d=n.n(v),g=n(0),y=n.n(g),b=n(11),E=function t(e){c()(this,t),this.modules=e},w=n(14);function O(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){o=!0,s=t},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw s}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var k=function(t){h()(n,t);var e=P(n);function n(){return c()(this,n),e.apply(this,arguments)}return i()(n,[{key:"parseData",value:function(t,e){var n=[],r=new(window.elementsManager.getElementClass(t.name));if(t.children&&t.children.length){var a,s=O(t.children);try{for(s.s();!(a=s.n()).done;){var c=a.value;n.push(this.parseData(c,r))}}catch(t){s.e(t)}finally{s.f()}}return r.id=t.id,r.children=n,r.settings=0===t.settings.length?{}:t.settings,e&&(r.parent=e),r}},{key:"duplicateElement",value:function(t,e){var n=this._duplicateElement(t);e.insertNewChildAfter(t.getId(),n);var r=Object(w.b)().modules.templateDataStorage;return r.elementsIds=_.union(r.elementsIds,n.getIds()),n}},{key:"_duplicateElement",value:function(t){var e=this,n=new(elementsManager.getElementClass(t.getName())),r=[];return t.children.map((function(t){var a=e._duplicateElement(t);a.setParent(n),r.push(a)})),n.component=new n.setChildren(r),n.settings=_.cloneDeep(t.settings),n.children=r,n}}]),n}(E),D=function(){function t(e){if(c()(this,t),this.route=e.route,!this.route)throw"Нужен route"}return i()(t,[{key:"get",value:function(t){if(!t)throw'Get only by "id"';var e=this.route+"/"+t;return fetch(e,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"getAll",value:function(){var t=this.route;return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"post",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t._token=_token,e=e||{"Content-Type":"application/json"};var n={method:"POST",body:JSON.stringify(t),headers:e};return fetch(this.route,n).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"postFiles",value:function(t,e){String(Math.random()).slice(2);e=e||"image";var n={"X-CSRF-TOKEN":_token},r=new FormData;console.log(t);for(var a=0;a<t.length;a++)t[a].size>10485760||0!==t[a].type.indexOf(e)?console.log(t[a]):r.append("files[".concat(a,"]"),t[a]);var s={method:"POST",body:r,headers:n};return fetch(this.route,s).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"put",value:function(t,e){e._token=_token;var n={method:"put",body:JSON.stringify(e),headers:{"X-CSRF-TOKEN":_token,"Content-Type":"application/json"}},r=this.route+"/"+t;return fetch(r,n).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"delete",value:function(t){var e={method:"delete",headers:{"X-CSRF-TOKEN":_token,"Content-Type":"application/json"}},n=this.route+"/"+t;return fetch(n,e).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"getOptions",value:function(){var t=this.route+"/options";return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}}]),t}(),S=n(56),R=n(20),T=n(34);function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var A=function(t){h()(n,t);var e=N(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).resource=new D({route:"/admin/ajax/templates"}),r}return i()(n,[{key:"load",value:function(){var t=this;if(this.template_id=Object(w.e)(),R.a.dispatch(Object(T.b)(w.a.TEMPLATE_SAVING)),this.template_id)this.resource.get(this.template_id).then((function(e){var n=JSON.parse(e.data),r=t.modules.elementsFactory.parseData(n),a=Object(w.b)().modules.templateDataStorage;a.replaceAll(r),a.setTitle(e.title),a.setName(e.name),Object(w.b)().endLoading(),R.a.dispatch(Object(T.b)(w.a.TEMPLATE_UPDATED))})).catch((function(t){console.error(t),R.a.dispatch(Object(T.b)(w.a.TEMPLATE_UPDATED))}))}},{key:"saveTemplate",value:function(){R.a.dispatch(Object(T.b)(w.a.TEMPLATE_SAVING));var t=Object(w.b)().modules.templateDataStorage.getTemplateDataForSave();this.resource.put(this.template_id,t).then((function(t){R.a.dispatch(Object(T.b)(w.a.TEMPLATE_UPDATED))})).catch((function(t){console.error(t),R.a.dispatch(Object(T.b)(w.a.TEMPLATE_UPDATED))}))}}]),n}(E),C=function t(){c()(this,t)},M=function t(){c()(this,t)},x=n(60),z=n(16),I=n(59),L=n(37);function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var B=function(t){h()(n,t);var e=H(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).elementsIds=[],r}return i()(n,[{key:"replaceAll",value:function(t){if(!t instanceof S.a)throw"Expect Root Element as root element;)";this.rootElement=t,this.elementsIds=t.getIds(),this.setCurrentRootElement()}},{key:"getTemplateData",value:function(){return this.rootElement.toObject()}},{key:"getTemplateDataForSave",value:function(){var t={};return t.data=this.getTemplateData(),t.title=this.title||"testtitle",t.name=this.name||"testname",console.log(this),t}},{key:"setTitle",value:function(t){this.title=t}},{key:"setName",value:function(t){this.name=t}},{key:"setCurrentRootElement",value:function(){return this.currentElement=this.rootElement,R.a.dispatch(Object(x.b)(this.currentElement)),this.currentElement}},{key:"setCurrentElement",value:function(t){if(!t instanceof z.a)throw"Only Base Element Can Be Set as Default";this.currentElement=t,R.a.dispatch(Object(x.b)(t))}},{key:"getCurrentElement",value:function(){return this.currentElement?this.currentElement:this.setCurrentRootElement()}},{key:"getRootElement",value:function(){return this.rootElement}},{key:"addWidgetInSection",value:function(t){var e=new I.a;this.elementsIds.push(e.getId());var n=new L.a;this.elementsIds.push(n.getId());var r=new(window.elementsManager.getElementClass(t));this.elementsIds.push(r.getId()),n.appendWidget(r),e.appendColumn(n),this.rootElement.appendNewSection(e),this.setCurrentElement(r),R.a.dispatch(Object(T.b)(w.a.TEMPLATE_NEED_UPDATE)),Object(w.b)().showSettingsPanel()}}]),n}(E),V=function(){function t(e){c()(this,t),this.elementsFactory=new k(this),this.saveImportModule=new A(this),this.settingsChangeModule=new C(this),this.templateSettingsChangeModule=new M(this),this.templateDataStorage=new B(this)}return i()(t,[{key:"loaded",value:function(){this.saveImportModule.load()}}]),t}(),U=n(27);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var F=function(t){h()(n,t);var e=W(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).state={element:r.props.element},r.onDragStart=r.onDragStart.bind(u()(r)),r}return i()(n,[{key:"onDragStart",value:function(t){R.a.dispatch(Object(U.c)(null)),t.dataTransfer.effectAllowed="copy",t.dataTransfer.setData("text/plain",this.state.element.getName())}},{key:"render",value:function(){if(!this.state.element instanceof z.a)throw"Widget Component must has Element in props";return y.a.createElement("div",{className:"widget-icon",draggable:"true",onDragStart:this.onDragStart},y.a.createElement(this.state.element.getIconComponent(),{height:35}),y.a.createElement("div",{className:"widget-icon__title"},this.state.element.getTitle()))}}]),n}(g.Component);function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var G=function(t){h()(n,t);var e=J(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).state={widgets:window.elementsManager.getWidgetsList()},r}return i()(n,[{key:"render",value:function(){return y.a.createElement("div",{className:"widget-panel"},this.state.widgets.map((function(t){return y.a.createElement(F,{element:t,key:t.getName()})})))}}]),n}(g.Component),K=n(131),X=n(8),$=n.n(X),q=n(9),Q=n.n(q),Y=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"20",height:"19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{d:"M5.6 15.883c0-1.136-.835-2.08-1.929-2.276V1.317A.419.419 0 003.25.9a.419.419 0 00-.421.417v12.29C1.735 13.803.9 14.747.9 15.883c0 1.279 1.055 2.317 2.35 2.317 1.295 0 2.35-1.038 2.35-2.317zm-2.35 1.484a1.497 1.497 0 01-1.507-1.484c0-.816.675-1.483 1.507-1.483.832 0 1.507.667 1.507 1.483 0 .817-.675 1.484-1.507 1.484zM11.9 9.484a2.376 2.376 0 00-1.873-2.33V1.317A.414.414 0 009.615.9a.414.414 0 00-.413.417v5.812A2.375 2.375 0 007.2 9.484c0 1.193.87 2.185 2.002 2.356v5.943c0 .23.184.417.413.417a.414.414 0 00.412-.417v-5.968a2.376 2.376 0 001.873-2.33zm-2.35 1.55a1.54 1.54 0 01-1.526-1.55A1.54 1.54 0 019.55 7.936c.84 0 1.526.693 1.526 1.548a1.54 1.54 0 01-1.526 1.55zM19.1 3.217C19.1 1.938 18.044.9 16.75.9S14.4 1.938 14.4 3.217c0 1.136.835 2.08 1.929 2.276v12.29c0 .232.19.417.421.417a.419.419 0 00.421-.417V5.493c1.094-.196 1.929-1.14 1.929-2.276zM16.75 4.7a1.497 1.497 0 01-1.507-1.483c0-.817.675-1.484 1.507-1.484.832 0 1.507.667 1.507 1.484 0 .816-.675 1.483-1.507 1.483z",fill:"#343B4C",stroke:"#343B4C",strokeWidth:".2"}))},Z=n(135),tt=n(1),et=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"10",height:"7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{d:"M1 6l3.5-4 4 4",stroke:"#343B4C",strokeWidth:"1.5"}))},nt=n(146);function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var ct=function(t){h()(n,t);var e=st(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).state={open:t.open},r.toggle=r.toggle.bind(u()(r)),r}return i()(n,[{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var t=this.props.controls||[],e="settings-section "+(this.state.open?"open":"");return y.a.createElement("div",{className:e},y.a.createElement("div",{className:"settings-section__title d-flex ",onClick:this.toggle},y.a.createElement("div",{className:"settings-section__icon d-flex "},y.a.createElement(et,null)),y.a.createElement("div",{className:"settings-section__label"},this.props.label)),y.a.createElement("div",{className:"controllers-wrapper"},t.map((function(t){var e=window.controllersManager.getController(t.type);return y.a.createElement(e,at(at({},t),{},{key:t.controlId,controller:new nt.a(t)}))}))))}}]),n}(g.Component),ot=n(346);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var ft=function(t){h()(n,t);var e=ut(n);function n(){return c()(this,n),e.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var t=this.props.sections||[];return y.a.createElement("div",{className:"settings-controllers"},y.a.createElement(ot.Scrollbars,{autoHide:!0,autoHideTimeout:500,autoHideDuration:200},t.map((function(t,e){return y.a.createElement(ct,lt(lt({},t),{},{key:t.sectionId,open:0===e}))}))))}}]),n}(g.Component);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var vt=function(t){h()(n,t);var e=pt(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).state={activeTab:"content"},r}return i()(n,[{key:"setActiveTab",value:function(t){this.setState(mt(mt({},this.state),{},{activeTab:t}))}},{key:"render",value:function(){var t=this,e=window.controllersManager,n=[];this.props.currentElement.getName&&(n=e.getControls(this.props.currentElement.getName())[this.state.activeTab]||[]);var r="panel-tab d-flex "+(this.state.activeTab===tt.s?"active":""),a="panel-tab d-flex "+(this.state.activeTab===tt.t?"active":""),s="panel-tab d-flex "+(this.state.activeTab===tt.r?"active":"");return y.a.createElement("div",{className:"panel settings-panel d-flex"},y.a.createElement("div",{className:"panel-tabs d-flex"},y.a.createElement("button",{className:r,onClick:function(){return t.setActiveTab(tt.s)}},y.a.createElement("span",{className:"panel-tab__icon"},y.a.createElement(K.a,null)),y.a.createElement("span",{className:"panel-tab__text"},"Content")),y.a.createElement("button",{className:a,onClick:function(){return t.setActiveTab(tt.t)}},y.a.createElement("span",{className:"panel-tab__icon"},y.a.createElement(Y,null)),y.a.createElement("span",{className:"panel-tab__text"},"Style")),y.a.createElement("button",{className:s,onClick:function(){return t.setActiveTab(tt.r)}},y.a.createElement("span",{className:"panel-tab__icon"},y.a.createElement(Z.a,null)),y.a.createElement("span",{className:"panel-tab__text"},"Advanced"))),y.a.createElement(ft,{sections:n}))}}]),n}(g.Component);var dt=Object(b.b)((function(t){return{currentElement:t.currentElement.currentElement}}))(vt);function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var yt=function(t){h()(n,t);var e=gt(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).state={},r}return i()(n,[{key:"render",value:function(){return y.a.createElement("div",{className:"editor-window"},y.a.createElement("iframe",{src:"/admin/editor-content"}))}}]),n}(g.Component);function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}g.Component;function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var wt=function(t){h()(n,t);var e=Et(n);function n(t){var r;return c()(this,n),(r=e.call(this,t)).saveTemplate=r.saveTemplate.bind(u()(r)),r}return i()(n,[{key:"saveTemplate",value:function(t){Object(w.b)().modules.saveImportModule.saveTemplate()}},{key:"render",value:function(){var t="btn font_montserrat font_500 btn_grey";switch(this.props.templateStatus){case w.a.TEMPLATE_UPDATED:t+=" btn_disabled ";break;case w.a.TEMPLATE_NEED_UPDATE:t+=" btn_active "}return y.a.createElement("div",{className:"control-group d-flex"},y.a.createElement("button",{className:t,onClick:this.saveTemplate},"UPDATE"),y.a.createElement("button",{className:"btn btn_grey"},y.a.createElement(et,{className:"icon"})))}}]),n}(g.Component);var Ot=Object(b.b)((function(t){return{templateStatus:t.templateStatus.status}}))(wt),jt=n(363),Pt=n.n(jt),kt=n(365),Dt=n.n(kt),St=n(88),Rt=n(43);function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var At=function(t){h()(r,t);var e,n=_t(r);function r(){var t;return c()(this,r),(t=n.call(this)).tabClick=t.tabClick.bind(u()(t)),t.toggleBrowser=t.toggleBrowser.bind(u()(t)),t.selectAsset=t.selectAsset.bind(u()(t)),t.chooseAsset=t.chooseAsset.bind(u()(t)),t.state={activeTab:"media",tabs:[{name:"icons",title:"Icons Library"},{name:"media",title:"Media Library"}],assets:t.getAssets("media"),selectedAsset:null,mediaAssets:[]},t.mediaResource=new D({route:"/admin/ajax/media"}),t}return i()(r,[{key:"componentDidMount",value:(e=Dt()(Pt.a.mark((function t(){var e;return Pt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.mediaResource.getAll();case 3:e=t.sent,this.setState((function(t){return"media"===(t=Nt(Nt({},t),{},{mediaAssets:e})).activeTab&&(t.assets=e),t})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})},{key:"getAssets",value:function(t){switch(t||(t=this.state.activeTab),t){case"icons":return Object(w.f)().getIconsList();case"media":return this.state?this.state.mediaAssets:[]}return[]}},{key:"selectAsset",value:function(t){var e=t.currentTarget.dataset.assetname;this.setState((function(t){return Nt(Nt({},t),{},{selectedAsset:e})}))}},{key:"tabClick",value:function(t){this.setActiveTab(t.target.dataset.tab)}},{key:"setActiveTab",value:function(t){var e=this;this.setState((function(n){return Nt(Nt({},n),{},{activeTab:t,assets:e.getAssets(t)})}))}},{key:"toggleBrowser",value:function(){this.setState((function(t){return Nt(Nt({},t),{},{selectedAsset:null})})),this.props.dispatch(Object(Rt.d)())}},{key:"chooseAsset",value:function(){var t,e=this;if(this.state.assets.forEach((function(n){n.name===e.state.selectedAsset&&(t=n)})),!t)throw"Asset with name ".concat(this.state.selectedAsset," not found in Assets Browser (").concat(this.state.activeTab,")!");this.props.onChoose(t),this.setState((function(t){return Nt(Nt({},t),{},{selectedAsset:null})})),this.props.dispatch(Object(Rt.d)())}},{key:"render",value:function(){var t=this,e="assets-browser";this.props.active&&(e+=" assets-browser_active");var n="btn btn_success";return this.state.selectedAsset||(n+=" btn_disabled"),React.createElement("div",{className:e},React.createElement("div",{className:"assets-browser__bg",onClick:this.toggleBrowser}),React.createElement("div",{className:"assets-browser-content"},React.createElement("div",{className:"assets-browser-top"},React.createElement("div",{className:"caption"},"Append Media"),React.createElement("button",{className:"btn btn_bare assets-browser__close"},React.createElement(St.a,{className:"icon",onClick:this.toggleBrowser})),React.createElement("div",{className:"assets-browser-nav"},this.state.tabs.map((function(e){var n="assets-browser__tab";return t.state.activeTab===e.name&&(n+=" assets-browser__tab_active"),React.createElement("button",{className:n,onClick:t.tabClick,key:e.name,"data-tab":e.name},e.title)})))),this.state.assets.length?React.createElement("div",{className:"assets-browser-choose-frame"},this.state.assets.map((function(e){var n,r="asset-choose",a={className:"asset-choose__content"};return"icons"===t.state.activeTab&&(n=e.iconComponent,r+=" asset-choose_icon",a.width="20",a.height="20"),"media"===t.state.activeTab&&(n="img",a.src=e.url,r+=" asset-choose_media",e.name=e.filename,e.assetType="media"),t.state.selectedAsset===e.name&&(r+=" asset-choose_selected"),React.createElement("div",{className:r,"data-assetname":e.name,key:e.name,onClick:t.selectAsset},React.createElement(n,a))}))):"",React.createElement("div",{className:"assets-browser-bottom"},React.createElement("button",{className:n,onClick:this.chooseAsset},"Choose"))))}}]),r}(Component);var Ct,Mt=Object(b.b)((function(t){return Nt({},t.assetsManagerSettings)}))(At),xt=(n(145),function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"17",height:"15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{d:"M15 0H1.364C.612 0 0 .612 0 1.364v9.545c0 .752.612 1.364 1.364 1.364h4.774c-.014.544-.118 1.414-.508 1.824a.67.67 0 01-.516.221.34.34 0 100 .682h6.136a.34.34 0 100-.682.668.668 0 01-.515-.22c-.39-.409-.494-1.28-.509-1.825H15c.752 0 1.364-.612 1.364-1.364V1.364C16.364.612 15.752 0 15 0zM8.182 11.593a.685.685 0 010-1.368.685.685 0 010 1.368zM1.364 9.545V1.364H15v8.181H1.365z",fill:"#8E94AA"}))}),zt=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"97",height:"35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{d:"M20.245 8.309l-3.747 9.57c0 2.31.476 4.088 1.443 5.31.318.41.808.796 1.483 1.154l-1.086 3.398c-.966-.358-1.8-.982-2.516-1.885a11.593 11.593 0 01-1.257-2.057c-.848 1.42-1.801 2.402-2.887 2.92-.82.411-1.827.61-3.032.61-2.423 0-4.449-.862-6.05-2.601C.86 22.883 0 20.388 0 17.228c0-1.101.066-2.097.199-2.96.132-.862.37-1.685.701-2.455.702-1.566 1.642-2.76 2.847-3.584 1.205-.823 2.595-1.234 4.184-1.234 1.47 0 2.74.292 3.813.863 1.51.796 2.622 2.097 3.31 3.902l2.212-4.858 2.979 1.407zm-7.163 9.53c.026-.093.04-.252.04-.464v-.293a.602.602 0 00-.04-.212c0-1.686-.477-3.185-1.417-4.5-.953-1.313-2-1.964-3.151-1.964-1.364 0-2.476.584-3.31 1.765-.914 1.275-1.364 3.053-1.364 5.35 0 2.097.463 3.703 1.403 4.804.834.983 1.894 1.487 3.165 1.487.887 0 1.615-.265 2.158-.796.9-.903 1.748-2.615 2.516-5.177zM38.874 27.05h-3.92l-4.077-11.162-.967-3.066-1.006 3.146-3.959 11.083h-4.184l7.203-19.14a72.897 72.897 0 01-.755-2.018c-.172-.451-.304-.756-.397-.902-.503-.797-1.31-1.195-2.41-1.195-.384 0-1.125.12-2.237.358l.437-3.69a13.272 13.272 0 011.35-.358A5.454 5.454 0 0124.985 0c2.065 0 3.68 1.075 4.833 3.212.437.743 1.032 2.177 1.8 4.3l7.256 19.539zM55.054 10.804h-5.587v10.579c0 .77.026 1.261.066 1.487.053.212.185.411.437.584.238.12.556.185.94.185.291 0 .847-.066 1.695-.185l.582 3.504c-.437.093-1.033.186-1.8.252-.769.066-1.298.106-1.59.106-1.204 0-2.144-.186-2.833-.557-.688-.372-1.178-.916-1.496-1.646-.146-.359-.252-.836-.318-1.447-.066-.597-.106-1.42-.106-2.456V10.804l-2.595-.04c-.556 0-1.072.253-1.55.757-.145.173-.33.438-.582.796l-2.515-2.561c.476-.65.887-1.128 1.231-1.447 1.06-.969 2.198-1.447 3.43-1.447l12.604.04v3.902h-.013zM73.578 11.56c.648 1.567.966 3.372.966 5.416 0 2.124-.344 3.956-1.046 5.495-.702 1.54-1.721 2.761-3.059 3.65-1.35.89-2.793 1.341-4.356 1.341-.94 0-1.681-.093-2.237-.292-.768-.265-1.55-.783-2.344-1.553v9.026h-4.356l.04-18.53c0-3.73 1.258-6.41 3.786-8.016 1.563-.983 3.337-1.487 5.336-1.487 1.655 0 3.112.425 4.383 1.288 1.245.849 2.211 2.07 2.886 3.663zm-4.357-.079c-.9-1.101-1.972-1.659-3.244-1.659-1.244 0-2.356.584-3.31 1.765-.45.585-.807 1.394-1.059 2.443a14.626 14.626 0 00-.384 3.41c0 2.31.45 4.01 1.364 5.098.913 1.088 2 1.62 3.244 1.62 1.297 0 2.41-.558 3.35-1.66.45-.584.807-1.354 1.059-2.35.251-.982.384-2.07.384-3.251 0-1.182-.12-2.23-.344-3.146-.226-.903-.583-1.66-1.06-2.27zM97 10.725l-2.158-.04-.04 16.366h-4.078V10.698h-6.7v16.366h-3.998V10.738c-.239 0-.53.093-.887.265-.345.186-.755.505-1.205.956l-2.662-2.668c.98-.969 1.854-1.593 2.596-1.898.74-.305 1.588-.451 2.515-.451H97v3.783z",fill:"#fff"}))},It=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"15",height:"15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{d:"M14.437 4.1L7.218 0 0 4.1l7.218 4.124 7.219-4.125z",fill:"#fff"}),y.a.createElement("path",{d:"M7.218 8.933l-4.867-2.78L0 7.487l7.218 4.124 7.219-4.124-2.351-1.336-4.868 2.781z",fill:"#fff"}),y.a.createElement("path",{d:"M7.218 12.322L2.351 9.54 0 10.876 7.218 15l7.219-4.124-2.351-1.335-4.868 2.78z",fill:"#fff"}))},Lt=n(142),Ht=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"17",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{d:"M8.388 0C5.183 0 2.276 1.754.131 4.602a.664.664 0 000 .793C2.276 8.246 5.183 10 8.388 10s6.112-1.754 8.257-4.602a.664.664 0 000-.793C14.5 1.754 11.593 0 8.388 0zm.23 8.52a3.53 3.53 0 01-3.751-3.75 3.536 3.536 0 013.291-3.29 3.53 3.53 0 013.75 3.75 3.548 3.548 0 01-3.29 3.29zM8.51 6.895a1.897 1.897 0 01-2.017-2.018 1.908 1.908 0 011.774-1.774 1.897 1.897 0 012.018 2.018 1.908 1.908 0 01-1.774 1.774z",fill:"#8E94AA"}))},Bt=n(92),Vt=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"13",height:"13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{fill:"#fff",d:"M0 10h3v3H0zM5 10h3v3H5zM10 10h3v3h-3zM0 0h3v3H0zM5 0h3v3H5zM10 0h3v3h-3zM0 5h3v3H0zM5 5h3v3H5zM10 5h3v3h-3z"}))},Ut=function(t){t.styles;var e=Q()(t,["styles"]);return y.a.createElement("svg",$()({width:"19",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),y.a.createElement("path",{fill:"#fff",d:"M0 0h19v2H0zM0 6h19v2H0V6zM0 12h19v2H0z"}))};function Wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}Ct=function(t){h()(n,t);var e=Jt(n);function n(t){var r;return c()(this,n),r=e.call(this,t),window.altrpEditor=u()(r),r.state={activePanel:"widgets",templateStatus:w.a.TEMPLATE_UPDATED},r.openPageSettings=r.openPageSettings.bind(u()(r)),r.showSettingsPanel=r.showSettingsPanel.bind(u()(r)),r.showWidgetsPanel=r.showWidgetsPanel.bind(u()(r)),r.onDragEnd=r.onDragEnd.bind(u()(r)),R.a.subscribe(r.templateStatus.bind(u()(r))),r}return i()(n,[{key:"templateStatus",value:function(){var t=R.a.getState().templateStatus.status;t!==this.state.templateStatus&&this.setState(Ft(Ft({},this.state),{},{templateStatus:t}))}},{key:"initModules",value:function(){this.modules=new V(this),this.modules.loaded()}},{key:"showWidgetsPanel",value:function(){this.setState(Ft(Ft({},this.state),{},{activePanel:"widgets"}))}},{key:"showSettingsPanel",value:function(){this.setState(Ft(Ft({},this.state),{},{activePanel:"settings"}))}},{key:"onDragEnd",value:function(){var t=R.a.getState().elementDrag.element;t&&t.stopDrag&&t.stopDrag(),R.a.dispatch(Object(U.d)())}},{key:"endLoading",value:function(){console.log("editor loaded")}},{key:"componentDidMount",value:function(){this.initModules()}},{key:"openPageSettings",value:function(){this.modules.templateDataStorage.setCurrentRootElement(),this.showSettingsPanel()}},{key:"render",value:function(){var t="",e="editor ";return this.state.templateStatus===w.a.TEMPLATE_SAVING&&(e+=" editor_saving"),R.a.getState().currentElement.currentElement.getType&&"root-element"===R.a.getState().currentElement.currentElement.getType()&&"settings"===this.state.activePanel&&(t=" active"),y.a.createElement(b.a,{store:R.a},y.a.createElement("div",{className:e,onDragEnd:this.onDragEnd},y.a.createElement("div",{className:"left-panel"},y.a.createElement("div",{className:"editor-top-panel"},y.a.createElement("button",{className:"btn btn_hamburger"},y.a.createElement(Ut,{className:"icon"})),y.a.createElement("div",{className:"logo"},y.a.createElement(zt,{viewBox:"0 0 97 35"})),y.a.createElement("button",{className:"btn btn_dots",onClick:this.showWidgetsPanel},y.a.createElement(Vt,{className:"icon"}))),y.a.createElement("div",{className:"left-panel-main"},"widgets"===this.state.activePanel&&y.a.createElement(G,null),"settings"===this.state.activePanel&&y.a.createElement(dt,null)),y.a.createElement("div",{className:"editor-bottom-panel d-flex align-content-center justify-center"},y.a.createElement("button",{className:"btn btn_settings"+t,onClick:this.openPageSettings},y.a.createElement(Bt.a,{className:"icon"})),y.a.createElement("button",{className:"btn "},y.a.createElement(It,{className:"icon"})),y.a.createElement("button",{className:"btn "},y.a.createElement(Lt.a,{className:"icon"})),y.a.createElement("button",{className:"btn "},y.a.createElement(xt,{className:"icon"})),y.a.createElement("button",{className:"btn "},y.a.createElement(Ht,{className:"icon"})),y.a.createElement(Ot,null))),y.a.createElement("div",{className:"right-panel"},y.a.createElement(yt,null))),y.a.createElement(Mt,null))}}]),n}(g.Component);e.default=Ct}}]);
//# sourceMappingURL=4.editor.js.map